<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="robots" content="noindex,nofollow"> 
    <link rel="shortcut icon" type="image/x-icon" href="">
    <link rel="icon" type="image/png" sizes="16x16" href="">
    <link rel="icon" type="image/png" sizes="32x32" href="">
    <link rel="apple-touch-icon" sizes="114x114" href="">
    <link rel="apple-touch-icon" sizes="72x72" href="">
    <meta name="msapplication-TileImage" content="">
    <title>김도희 홍진화</title>
    <meta name="description" content=""> 
    <meta property="og:title" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:description" content="">
    <meta property="og:keyword" content="">
    <meta name="naver-site-verification" content="" />

    <link href="https://cdn.jsdelivr.net/gh/sun-typeface/SUITE@2/fonts/variable/woff2/SUITE-Variable.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="./resources/css/common.css">
    <script src="./resources/js/lib/vue.min.js"></script>
    <!-- <script src="./resources/js/lib/i18next.min.js"></script>
    <script src="./resources/js/locale.js"></script> -->

</head>
<body>
    <div class="wrap p-main" id="wrap">
        <header class="header" id="header">
            <div class="header-inner">
                <nav class="nav font-serif" id="navigation">
                    <header class="nav-header">
                        <button class="btn-icon hamberger e-menu" title="메뉴 보기"><span class="bar"></span></button>
                        <h1 class="logo font-serif">저희 결혼합니다</h1>
                    </header>
                    <div class="nav-inner">
                        <div class="spread">
                            <ul class="menu">
                                <li><a href="#videoWrap">첫화면</a></li>
                                <li><a href="#date">날짜</a></li>
                                <li><a href="#photo">사진</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <!-- <h1 class="logo font-serif"><a href="/">저희 결혼합니다</a></h1> -->
            </div>
        </header>

        <div class="container" id="container">
            <section class="section-visual">
                <div class="video-wrapper" id="videoWrap">
                    <!-- 사파리 랜더링 이슈로 for 문으로 생성 하면 안됨 -->
                    <video preload="auto" muted playsinline :class="{play : (shuffleIndex[videoCount]) == 0}">
                        <source src="./resources/video/main_01.mp4" type="video/mp4">
                        <img src="./resources/video/img_poster_01.jpg" alt="">
                    </video>
                    <video muted playsinline :class="{play : (shuffleIndex[videoCount]) == 1}">
                        <source src="./resources/video/main_02.mp4" type="video/mp4">
                    </video>
                    <video muted playsinline :class="{play : (shuffleIndex[videoCount]) == 2}">
                        <source src="./resources/video/main_03.mp4" type="video/mp4">
                    </video>
                    <video muted playsinline :class="{play : (shuffleIndex[videoCount]) == 3}">
                        <source src="./resources/video/main_04.mp4" type="video/mp4">
                    </video>
                    <video muted playsinline :class="{play : (shuffleIndex[videoCount]) == 4}">
                        <source src="./resources/video/main_05.mp4" type="video/mp4">
                    </video>
                </div>
                <p class="copy font-serif"><span>15년 만남의 결실을 </span><span>맺으려 합니다.</span><span class="bar"> </span><strong>드디어 결혼 합니다.</strong></p>
            </section>

            <main class="contents" id="contents">
                <!-- date -->
                <section class="section section-date" id="date">
                    <div class="section-inner">
                        <div class="content">
                            <h2 class="section-title"><span>인사</span></h2>
                            <div class="description">
                                <p class="head-desc">작은 인연으로 만나 연인이 된 저희가 이제는 더 큰 열매를 맺고자 합니다.</p>
                                <p>인생의 중요하고 소중한 날 감사한 분들을 모시는 것이 도리인 줄 아오나<br><strong>가족들만의 작은 결혼식</strong>을 하기로 뜻을 모았습니다.</p>
                                <p>함께 모시지 못함을 송구스럽게 생각합니다.</p>
                                <p>따뜻한 격려로 축복해 주시어 힘찬 출발의 디딤이 되어 주십시오.</p>
                            </div>

                            <div class="benefit-list">
                                <h3 class="title">홍진화</h3>
                                <ul class="font-serif">
                                    <li class="one"><span>故홍승록 &middot; 지미영의 장남</span></li>
                                </ul>
                                <h3 class="title">김도희</h3>
                                <ul class="font-serif">
                                    <li class="one"><span>김용연 &middot; 윤성숙의 장녀</span></li>
                                </ul>
                                <p class="font-serif wedding-date">2024년 11월 09일<br>가족들만의 작은 결혼식</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- cuisine -->
                <section class="section section-cuisine" id="photo">
                    <div class="section-inner">
                        <div class="content">
                            <h2 class="section-title">인연, <strong class="text-small">그리고</strong> 연인</h2>
                            <div class="description">
                                <p class="head-desc">2010년 10월 8일부터 이어진 인연</p>
                                <br>
                                <p>크고 작은 다툼 없이 서로의 의견을 나누고 조율하며 긴 시간을 함께 해왔습니다.</p>
                                <p>신중했던 만큼 더욱 행복한 삶을 꾸려 나가려 합니다.</p>
                                <br>
                                <p>"결혼은 언제 하냐?"</p>
                                <br>
                                <p>가장 궁금해 하셨던 질문</p>
                                <p><strong>2024년 11월 09일</strong> 드디어 합니다.</p>
                            </div>
                        </div>
                        <div class="image-list">
                            <div class="one">
                                <p class="text-move font-serif"><strong>We are gonna get marry</strong><span>Congratulate us</span></p>
                                <div class="swiper swiper1">
                                    <div class="swiper-wrapper">
                                        <div class="swiper-slide"><img src="./resources/images/img_201101.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201104.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201105.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201205.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201304.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201306.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201404.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201404_02.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201405.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201503.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201507.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201604.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201606.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201610.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201710.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201806.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201806_02.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20200801.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20220409.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20220423.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20220612.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20220918.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20230526.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20230630.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20230804.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_201806_02.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20231029.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20231029_02.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20231128.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20240229.jpg" alt=""></div>
                                        <div class="swiper-slide"><img src="./resources/images/img_20240621.jpg" alt=""></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </main>

            <footer class="footer" id="footer">
                <div class="footer-wrap">
                    <a href="javascript:;" class="btn-top font-serif" onclick="window.scrollTo(0,0);"><i class="icon top"></i>TOP</a>
                    <div class="footer-inner">
                        <h3 class="footer-logo font-serif"><strong class="logo-ko">김도희, 홍진화의 결혼</strong></h3>
                        <div class="details font-serif">
                            <dl>
                                <div>
                                    <dt>날짜</dt>
                                    <dd>2024.11.09</dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="./resources/js/ui.js"></script>

    <script>

        document.addEventListener('DOMContentLoaded', () => {
            let _html = document.querySelector('html');
            let lang = _html.getAttribute('lang');

            const videoList = {
                'mo': [
                    {src: './resources/video/main_01.mp4'},
                    {src: './resources/video/main_02.mp4'},
                    {src: './resources/video/main_03.mp4'},
                    {src: './resources/video/main_04.mp4'},
                    {src: './resources/video/main_05.mp4'},
                ],
                'pc': [
                    {src: './resources/video/main_01.mp4'},
                    {src: './resources/video/main_02.mp4'},
                    {src: './resources/video/main_03.mp4'},
                    {src: './resources/video/main_04.mp4'},
                    {src: './resources/video/main_05.mp4'},
                ]
            };

            // const i18n = new VueI18n({ 
            //     fallbackLng: 'ko',
            //     locale: this.currentLocale,
            //     messages: messages
            // });

            let vm = new Vue({
                el: '#wrap',
                // i18n: i18n,
                data: () => { return {
                    currentLocale: localStorage.getItem("locale") || 'ko',
                    VIDEO: videoList,
                    pickedVideos: [],
                    shuffleIndex: [],
                    videoCount: -1,
                    currentViewType:'mo',
                    isEndedBefore: [false, false, false, false, false],
                    videoListEl: [],
                    isLargeDivce: false,
                }},
                methods: {
                    changeLocale() {
                        _html = document.querySelector('html');
                        // lang = _html.getAttribute('lang');

                        // this.$i18n.locale = this.currentLocale;
                        // this.currentLocale === 'ko' ? this.currentLocale = 'en' : this.currentLocale = 'ko';

                        // this.setLocale(this.currentLocale);

                        // _html.setAttribute('lang', this.currentLocale);
                    },
                    setLocale(locale) {
                        // localStorage.setItem('locale', locale);
                        // this.$i18n.locale = locale;
                    },
                    checkWidth() {
                        let winWidth = window.innerWidth;

                        this.isLargeDivce = false;
                        this.currentViewType = 'mo';
                        this.pickedVideos = this.VIDEO.mo;

                        // if(winWidth < 1280) {
                        //     this.isLargeDivce = false;
                        //     this.currentViewType = 'mo';
                        //     this.pickedVideos = this.VIDEO.mo;
                        // } else {
                        //     this.isLargeDivce = true;
                        //     this.currentViewType = 'pc';
                        //     this.pickedVideos = this.VIDEO.pc;
                        // }

                        [].map.call( this.videoListEl, (item, i) => {
                            item.querySelector('source').src = this.pickedVideos[i].src;
                        });
                        // this.videoListEl[0].querySelector('img').src = './resources/video/img_poster_' + this.currentViewType + '_01.jpg';
                    },
                    shuffle(arr) {
                        return arr.sort(() => Math.floor( Math.random() - 0.5) );
                    },
                    createPlayList() {
                        this.shuffleIndex = [];
                        
                         let copiedVideos = [1, 2, 3, 4];

                        this.shuffleIndex[this.shuffleIndex.length] = 0;
                        copiedVideos = this.shuffle(copiedVideos);
                        Array.prototype.push.apply(this.shuffleIndex, copiedVideos);
                    },
                    playVideo(currentIndex) {
                        this.$nextTick(() => {
                            this.playPromise = this.videoListEl[this.shuffleIndex[currentIndex]].play();

                            if (this.playPromise !== undefined) {
                                this.playPromise.then(_ => {
                                })
                                .catch(error => {
                                    // console.log('play error', error);
                                    this.videoListEl[this.shuffleIndex[currentIndex]].play();
                                });
                            }
                        });
                    },
                    detectVideoStatus() {
                        let leng = this.shuffleIndex.length - 1;

                        [].map.call( this.videoListEl, item => item.addEventListener('ended', () => {
                            if(this.videoCount < leng) {
                                this.videoCount++;
                            } else if(this.videoCount == leng) {
                                this.createPlayList();
                                this.videoCount = 0;
                            }
                        }));

                        [].map.call( this.videoListEl, (item, i) => item.addEventListener('timeupdate', () => {
                            if (this.videoCount == -1 && i == 0 && item.readyState > 3) {
                                this.videoCount = 0;
                            }
                            if(item.duration - item.currentTime <= 1 && this.isEndedBefore[i] == false) {
                                this.isEndedBefore[i] = true;
                                if (this.videoCount == this.videoListEl.length - 1) {
                                    this.playVideo(0);
                                } else {
                                    this.playVideo(this.videoCount+1);
                                }
                            } else if (item.duration - item.currentTime > 1) {
                                this.isEndedBefore[i] = false;
                            }
                        }));
                    },
                    createInit() {
                        let winWidth = window.innerWidth;

                        if ( (winWidth >= 1280 && this.currentViewType == 'mo') ) {
                            this.checkWidth();
                        }
                        this.createPlayList();
                        this.playVideo(0);
                    },
                    resizeInit() {
                        this.checkWidth();
                        this.createPlayList();
                        this.playVideo(this.videoCount);
                    },
                    initSwiper() {
                        const mySwiper = new Swiper('.swiper1', {
                            // spaceBetween: 30,
                            centeredSlides: true,
                            autoplay: {
                                delay: 2000,
                                disableOnInteraction: false,
                            },
                            loop: true,
                            speed: 1000,
                            // effect: "fade",
                            // autoHeight: true,
                            slidesPerView: "auto",
                        });

                        mySwiper.init();
                    }
                },
                created() {
                    // this.$i18n.locale = this.currentLocale;
                },
                mounted() {
                    // _html.setAttribute('lang', this.currentLocale);

                    this.videoListEl = document.querySelectorAll('#videoWrap video');
                    
                    this.createInit();
                    this.detectVideoStatus();
                    this.initSwiper();

                    window.addEventListener('resize', () => {
                        let winWidth = window.innerWidth;

                        if ( (winWidth < 1280 && this.currentViewType == 'pc') || (winWidth >= 1280 && this.currentViewType == 'mo') ) {
                            this.resizeInit();
                        }
                    });
                },
            });
        });

    </script>
</body>
</html>